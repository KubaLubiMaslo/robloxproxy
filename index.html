<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Fetch Raw Text</title>
</head>
<body>
  <h1>Fetched Raw Content from URL</h1>
  <pre id="content" style="word-wrap: break-word; white-space: pre-wrap;">Loading...</pre>

  <script>
    // Function to get the URL from the query string
    function getQueryParam(name) {
      const urlParams = new URLSearchParams(window.location.search);
      return urlParams.get(name);
    }

    // Function to escape HTML characters
    function escapeHtml(str) {
      return str.replace(/&/g, '&amp;')
                .replace(/</g, '&lt;')
                .replace(/>/g, '&gt;')
                .replace(/"/g, '&quot;')
                .replace(/'/g, '&#039;');
    }

    // Function to fetch and display the raw content
    function fetchContent(url) {
      fetch(url)
        .then(response => {
          if (!response.ok) {
            throw new Error('Network response was not ok');
          }
          return response.text();  // Get raw text from the URL
        })
        .then(data => {
          // Escape the HTML content to prevent rendering as HTML and ensure raw text display
          const escapedContent = escapeHtml(data);
          
          // Display the escaped raw text content inside the 'content' pre tag
          document.getElementById('content').textContent = escapedContent;
        })
        .catch(error => {
          document.getElementById('content').textContent = 'Error fetching content: ' + error;
        });
    }

    // Get the URL from the query parameter and fetch the content
    const url = getQueryParam('url');  // Get the 'url' parameter from query string
    if (url) {
      fetchContent(url);  // Fetch the content if the URL is provided
    } else {
      document.getElementById('content').textContent = 'No URL provided in the query string.';
    }
  </script>
</body>
</html>
